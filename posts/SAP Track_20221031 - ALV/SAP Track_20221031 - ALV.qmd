---
title: "Co-op SAP Track 20221031 - ALV"
author: "Siyun Min"
date: "2022-10-31"
categories: [SSU, SAP]
---
# 20221031 - ALV

# ABAP LIST Viewer

리스트 화면에 데이터를 조회하거나, 조회된 데이터를 수정/변경하는 목적

cf. Report program에서 WRITE 구문을 이용하여 LIST 화면을 구성한 것에 조회된 데이터를 엑셀로 내려받은 기능을 추가하려면?

- GUI STATUS 추가

정렬, 필터 등 사용자가 버튼을 클릭하면 반응하게 하려면?

- 이벤트 스크립트를 기술

→ ALV는 이런 기본적인 사무용 작업들이 이미 포함된 패키지 프로그램으로 제공

- 즉, 엑셀 다운, 데이터 정렬, 합계 계산, 정보 필터 같은 기본 작업들은 스크립트를 구현하지 않고 자유롭게 사용

# ALV 종류

1. function을 이용하는 방법
    - REUSE_ALV_LIST_DISPLAY, REUSE_ALV_GRID_DISPLAY 함수를 이용하여 ALV 프로그램 출력
    - 스크린을 생성할 필요가 없고, 스크립트를 기술할 필요가 없어 비교적 생산성이 높은 개발 방법을 제공
2. GRID 컨트롤을 이용하는 방법
    - ABAP Object를 이용한 ALV GRID 기술을 이용하여 ALV 프로그램 출력

# ALV-LIST

![Untitled](./Untitled.png)

```abap
DATA: GT_SFLIGHT TYPE TABLE OF SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_LIST_DISPLAY'
  EXPORTING
      I_STRUCTURE_NAME = 'SFLIGHT'
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%201.png)

# ALV-GRID

![Untitled](./Untitled%202.png)

```abap
DATA: GT_SFLIGHT TYPE TABLE OF SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
      I_STRUCTURE_NAME = 'SFLIGHT'
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%203.png)

![Untitled](./Untitled%204.png)

![Untitled](./Untitled%205.png)

# ALV 출력

![Untitled](./Untitled%206.png)

![Untitled](./Untitled%207.png)

# IT_FIELDCAT parameter와 필드 카탈로그

필드 카탈로그는 ALV에서 조회되는 칼럼들의 필드 정보를 포함하는 SLIS_T_FIELDCAT_ALV 타입의 테이블 구조를 가지며, ALV는 필드 카탈로그 정보를 저장하는 internal table을 이용해 필드 타입 인식

- ex) 필드가 숫자 or 문자 타입을 구분하고 화면에 보여줄 필드 길이를 지정하기 위해 필드 카탈로그 정보 이용

## ABAP Dictionary를 이용한 ALV

![Untitled](./Untitled%208.png)

```abap
TYPE-POOLS: SLIS.

DATA: GT_SFLIGHT TYPE TABLE OF SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    I_STRUCTURE_NAME = 'SFLIGHT'
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

## SLIS 기반의 ALV

![Untitled](./Untitled%209.png)

## 필드 카탈로그를 이용한 ALV

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.
```

### 필드 카탈로그에 필드추가

![Untitled](./Untitled%2010.png)

### 필드 카탈로그를 이용하여 ALV 호출

![Untitled](./Untitled%2011.png)

![Untitled](./Untitled%2012.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNID'.
GS_FIELDCAT-SELTEXT_M = '편명'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT,
  CARRID LIKE SFLIGHT-CARRID,
  CONNID LIKE SFLIGHT-CONNID,
  END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT
  WHERE CARRID = 'AA'.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2013.png)

## 필드 카탈로그 속성

### COL_POS: 컬럼의 OUTPUT 순서

### FIELDNAME: 필드 카탈로그의 필드 이름

ALV 출력 시, internal table의 필드 이름과 같아야 함

![Untitled](./Untitled%2014.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNIDD'.
GS_FIELDCAT-SELTEXT_M = '편명'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT,
  CARRID LIKE SFLIGHT-CARRID,
  CONNID LIKE SFLIGHT-CONNID,
  END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT
  WHERE CARRID = 'AA'.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2015.png)

### CURRENCY: CURRENCY 단위

![Untitled](./Untitled%2016.png)

![Untitled](./Untitled%2017.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNID'.
GS_FIELDCAT-SELTEXT_M = '편명'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

GS_FIELDCAT-COL_POS = 3.
GS_FIELDCAT-FIELDNAME = 'PRICE'.
GS_FIELDCAT-SELTEXT_M = '가격'.
GS_FIELDCAT-CURRENCY = 'KRW'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT.
  INCLUDE TYPE SFLIGHT.
DATA: END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2018.png)

### KEY: KEY 필드 설정

![Untitled](./Untitled%2019.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
GS_FIELDCAT-KEY = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNID'.
GS_FIELDCAT-SELTEXT_M = '편명'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 3.
GS_FIELDCAT-FIELDNAME = 'PRICE'.
GS_FIELDCAT-SELTEXT_M = '가격'.
GS_FIELDCAT-CURRENCY = 'KRW'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT.
  INCLUDE TYPE SFLIGHT.
DATA: END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2020.png)

### JUST: 정렬 (L, R, C)

![Untitled](./Untitled%2021.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
GS_FIELDCAT-KEY = 'X'.
GS_FIELDCAT-JUST = 'L'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNID'.
GS_FIELDCAT-SELTEXT_M = '편명'.
GS_FIELDCAT-JUST = 'C'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 3.
GS_FIELDCAT-FIELDNAME = 'PRICE'.
GS_FIELDCAT-SELTEXT_M = '가격'.
GS_FIELDCAT-CURRENCY = 'KRW'.
GS_FIELDCAT-JUST = 'R'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT.
  INCLUDE TYPE SFLIGHT.
DATA: END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2022.png)

### DO_SUM: 합계표

![Untitled](./Untitled%2023.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
GS_FIELDCAT-KEY = 'X'.
GS_FIELDCAT-JUST = 'L'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNID'.
GS_FIELDCAT-SELTEXT_M = '편명'.
GS_FIELDCAT-JUST = 'C'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 3.
GS_FIELDCAT-FIELDNAME = 'PRICE'.
GS_FIELDCAT-SELTEXT_M = '가격'.
GS_FIELDCAT-CURRENCY = 'KRW'.
GS_FIELDCAT-JUST = 'R'.
GS_FIELDCAT-DO_SUM = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT.
  INCLUDE TYPE SFLIGHT.
DATA: END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2024.png)

### NO_ZERO: 0값 삭제

![Untitled](./Untitled%2025.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
GS_FIELDCAT-KEY = 'X'.
GS_FIELDCAT-JUST = 'L'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNID'.
GS_FIELDCAT-SELTEXT_M = '편명'.
GS_FIELDCAT-JUST = 'C'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 3.
GS_FIELDCAT-FIELDNAME = 'PRICE'.
GS_FIELDCAT-SELTEXT_M = '가격'.
GS_FIELDCAT-CURRENCY = 'KRW'.
GS_FIELDCAT-JUST = 'R'.
GS_FIELDCAT-DO_SUM = 'X'.
GS_FIELDCAT-NO_ZERO = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT.
  INCLUDE TYPE SFLIGHT.
DATA: END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2026.png)

### NO_SIGN: 출력부호 제거

실제 데이터가 absolute value가 되는게 아니라 출력만 absolute value로 변경됨

![Untitled](./Untitled%2027.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
GS_FIELDCAT-KEY = 'X'.
GS_FIELDCAT-JUST = 'L'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNID'.
GS_FIELDCAT-SELTEXT_M = '편명'.
GS_FIELDCAT-JUST = 'C'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 3.
GS_FIELDCAT-FIELDNAME = 'PRICE'.
GS_FIELDCAT-SELTEXT_M = '가격'.
GS_FIELDCAT-CURRENCY = 'KRW'.
GS_FIELDCAT-JUST = 'R'.
GS_FIELDCAT-DO_SUM = 'X'.
GS_FIELDCAT-NO_ZERO = 'X'.
GS_FIELDCAT-NO_SIGN = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT.
  INCLUDE TYPE SFLIGHT.
DATA: END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2028.png)

### OUTPUTLEN: 문자의 열 너비

![Untitled](./Untitled%2029.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
GS_FIELDCAT-KEY = 'X'.
GS_FIELDCAT-JUST = 'L'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNID'.
GS_FIELDCAT-SELTEXT_M = '편명'.
GS_FIELDCAT-JUST = 'C'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 3.
GS_FIELDCAT-FIELDNAME = 'PRICE'.
GS_FIELDCAT-SELTEXT_M = '가격'.
GS_FIELDCAT-CURRENCY = 'KRW'.
GS_FIELDCAT-JUST = 'R'.
GS_FIELDCAT-DO_SUM = 'X'.
GS_FIELDCAT-NO_ZERO = 'X'.
GS_FIELDCAT-NO_SIGN = 'X'.
GS_FIELDCAT-OUTPUTLEN = 20.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT.
  INCLUDE TYPE SFLIGHT.
DATA: END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2030.png)

### EMPHASIZE: 색상 강조

![Untitled](./Untitled%2031.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
GS_FIELDCAT-KEY = 'X'.
GS_FIELDCAT-JUST = 'L'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNID'.
GS_FIELDCAT-SELTEXT_M = '편명'.
GS_FIELDCAT-JUST = 'C'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 3.
GS_FIELDCAT-FIELDNAME = 'PRICE'.
GS_FIELDCAT-SELTEXT_M = '가격'.
GS_FIELDCAT-CURRENCY = 'KRW'.
GS_FIELDCAT-JUST = 'R'.
GS_FIELDCAT-DO_SUM = 'X'.
GS_FIELDCAT-NO_ZERO = 'X'.
GS_FIELDCAT-NO_SIGN = 'X'.
GS_FIELDCAT-OUTPUTLEN = 20.
GS_FIELDCAT-EMPHASIZE = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT.
  INCLUDE TYPE SFLIGHT.
DATA: END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2032.png)

### NO_OUT: 필드 숨김

![Untitled](./Untitled%2033.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
GS_FIELDCAT-KEY = 'X'.
GS_FIELDCAT-JUST = 'L'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNID'.
GS_FIELDCAT-SELTEXT_M = '편명'.
GS_FIELDCAT-JUST = 'C'.
GS_FIELDCAT-NO_OUT = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 3.
GS_FIELDCAT-FIELDNAME = 'PRICE'.
GS_FIELDCAT-SELTEXT_M = '가격'.
GS_FIELDCAT-CURRENCY = 'KRW'.
GS_FIELDCAT-JUST = 'R'.
GS_FIELDCAT-DO_SUM = 'X'.
GS_FIELDCAT-NO_ZERO = 'X'.
GS_FIELDCAT-NO_SIGN = 'X'.
GS_FIELDCAT-OUTPUTLEN = 20.
GS_FIELDCAT-EMPHASIZE = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT.
  INCLUDE TYPE SFLIGHT.
DATA: END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2034.png)

### EDIT_MASK: 데이터 포맷 변경

![Untitled](./Untitled%2035.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
GS_FIELDCAT-KEY = 'X'.
GS_FIELDCAT-JUST = 'L'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNID'.
GS_FIELDCAT-SELTEXT_M = '편명'.
GS_FIELDCAT-JUST = 'C'.
GS_FIELDCAT-NO_OUT = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 3.
GS_FIELDCAT-FIELDNAME = 'PRICE'.
GS_FIELDCAT-SELTEXT_M = '가격'.
GS_FIELDCAT-CURRENCY = 'KRW'.
GS_FIELDCAT-JUST = 'R'.
GS_FIELDCAT-DO_SUM = 'X'.
GS_FIELDCAT-NO_ZERO = 'X'.
GS_FIELDCAT-NO_SIGN = 'X'.
GS_FIELDCAT-OUTPUTLEN = 20.
GS_FIELDCAT-EMPHASIZE = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 4.
GS_FIELDCAT-FIELDNAME = 'FLDATE'.
GS_FIELDCAT-SELTEXT_M = '날짜'.
*GS_FIELDCAT-EDIT_MASK = '____/__/__'.
GS_FIELDCAT-OUTPUTLEN = 20.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT.
  INCLUDE TYPE SFLIGHT.
DATA: END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2036.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
GS_FIELDCAT-KEY = 'X'.
GS_FIELDCAT-JUST = 'L'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNID'.
GS_FIELDCAT-SELTEXT_M = '편명'.
GS_FIELDCAT-JUST = 'C'.
GS_FIELDCAT-NO_OUT = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 3.
GS_FIELDCAT-FIELDNAME = 'PRICE'.
GS_FIELDCAT-SELTEXT_M = '가격'.
GS_FIELDCAT-CURRENCY = 'KRW'.
GS_FIELDCAT-JUST = 'R'.
GS_FIELDCAT-DO_SUM = 'X'.
GS_FIELDCAT-NO_ZERO = 'X'.
GS_FIELDCAT-NO_SIGN = 'X'.
GS_FIELDCAT-OUTPUTLEN = 20.
GS_FIELDCAT-EMPHASIZE = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 4.
GS_FIELDCAT-FIELDNAME = 'FLDATE'.
GS_FIELDCAT-SELTEXT_M = '날짜'.
GS_FIELDCAT-EDIT_MASK = '____/__/__'.
GS_FIELDCAT-OUTPUTLEN = 20.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT.
  INCLUDE TYPE SFLIGHT.
DATA: END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2037.png)

### EDIT: 편집모드

![Untitled](./Untitled%2038.png)

```abap
TYPE-POOLS: SLIS.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'CARRID'.
GS_FIELDCAT-SELTEXT_M = '항공코드'.
GS_FIELDCAT-KEY = 'X'.
GS_FIELDCAT-JUST = 'L'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'CONNID'.
GS_FIELDCAT-SELTEXT_M = '편명'.
GS_FIELDCAT-JUST = 'C'.
GS_FIELDCAT-NO_OUT = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 3.
GS_FIELDCAT-FIELDNAME = 'PRICE'.
GS_FIELDCAT-SELTEXT_M = '가격'.
GS_FIELDCAT-CURRENCY = 'KRW'.
GS_FIELDCAT-JUST = 'R'.
GS_FIELDCAT-DO_SUM = 'X'.
GS_FIELDCAT-NO_ZERO = 'X'.
GS_FIELDCAT-NO_SIGN = 'X'.
GS_FIELDCAT-OUTPUTLEN = 20.
GS_FIELDCAT-EMPHASIZE = 'X'.
GS_FIELDCAT-EDIT = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 4.
GS_FIELDCAT-FIELDNAME = 'FLDATE'.
GS_FIELDCAT-SELTEXT_M = '날짜'.
*GS_FIELDCAT-EDIT_MASK = '____/__/__'.
GS_FIELDCAT-OUTPUTLEN = 20.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

DATA: BEGIN OF GS_SFLIGHT.
  INCLUDE TYPE SFLIGHT.
DATA: END OF GS_SFLIGHT.
DATA: GT_SFLIGHT LIKE TABLE OF GS_SFLIGHT.

SELECT * FROM SFLIGHT
  INTO CORRESPONDING FIELDS OF TABLE GT_SFLIGHT.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
  EXPORTING
    IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_SFLIGHT.
```

![Untitled](./Untitled%2039.png)

# in-class practice

![Untitled](./Untitled%2040.png)

```abap
TABLES: ZEDU15_001, ZEDU15_002.

SELECTION-SCREEN BEGIN OF BLOCK B1 WITH FRAME.
SELECT-OPTIONS: S_NUMBER FOR ZEDU15_001-Z_NUMBER.
PARAMETERS: P_ZID LIKE ZEDU15_001-ZID.
PARAMETERS: P_MATNR LIKE ZEDU15_002-MATNR.
PARAMETERS: P_CODE LIKE ZEDU15_002-ZZ_CODE MODIF ID M1.
SELECTION-SCREEN END OF BLOCK B1.

SELECTION-SCREEN BEGIN OF BLOCK B2 WITH FRAME.
SELECTION-SCREEN BEGIN OF LINE.
PARAMETERS: P_R1 RADIOBUTTON GROUP R1 USER-COMMAND UC1.
SELECTION-SCREEN POSITION 3.
SELECTION-SCREEN COMMENT (10) FOR FIELD P_R1.
PARAMETERS: P_R2 RADIOBUTTON GROUP R1.
SELECTION-SCREEN POSITION 20.
SELECTION-SCREEN COMMENT (10) FOR FIELD P_R2.
PARAMETERS: P_R3 RADIOBUTTON GROUP R1 DEFAULT 'X'.
SELECTION-SCREEN POSITION 37.
SELECTION-SCREEN COMMENT (10) FOR FIELD P_R3.
SELECTION-SCREEN END OF LINE.
SELECTION-SCREEN END OF BLOCK B2.

DATA: BEGIN OF GS_ZEDU1_001.
  INCLUDE TYPE ZEDU15_001.
DATA: END OF GS_ZEDU1_001.
DATA: GT_ZEDU1_001 LIKE TABLE OF GS_ZEDU1_001.

DATA: BEGIN OF GS_ZEDU1_002.
  INCLUDE TYPE ZEDU15_002.
  DATA: COLOR TYPE C LENGTH 4,
        LIGHT TYPE C.
DATA: END OF GS_ZEDU1_002.
DATA: GT_ZEDU1_002 LIKE TABLE OF GS_ZEDU1_002.

AT SELECTION-SCREEN OUTPUT.
PERFORM SET_SCREEN.

START-OF-SELECTION.

IF P_R3 = 'X'.
  SELECT * FROM ZEDU15_002
    INTO CORRESPONDING FIELDS OF TABLE GT_ZEDU1_002
    WHERE ZEDU15_002~Z_NUMBER IN S_NUMBER
    OR ZEDU15_002~ZID = P_ZID.
ELSEIF P_R2 = 'X'.
  SELECT * FROM ZEDU15_002
    INTO CORRESPONDING FIELDS OF TABLE GT_ZEDU1_002
    WHERE ZEDU15_002~Z_NUMBER IN S_NUMBER
    OR ZEDU15_002~ZID = P_ZID
    AND ZEDU15_002~ZZ_STATUS = '2'.
ELSEIF P_R1 = 'X'.
  SELECT * FROM ZEDU15_002
    INTO CORRESPONDING FIELDS OF TABLE GT_ZEDU1_002
    WHERE ZEDU15_002~Z_NUMBER IN S_NUMBER
    OR ZEDU15_002~ZID = P_ZID
    AND ZEDU15_002~ZZ_STATUS = '1'.
ENDIF.

IF ( P_ZID IS INITIAL ) OR ( S_NUMBER IS INITIAL ).
  MESSAGE I000.
  EXIT.
ENDIF.

DATA GT_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV.
DATA GS_FIELDCAT TYPE SLIS_FIELDCAT_ALV.

CLEAR: GT_FIELDCAT, GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 1.
GS_FIELDCAT-FIELDNAME = 'COLOR'.
GS_FIELDCAT-SELTEXT_M = '체크'.
GS_FIELDCAT-ICON = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 2.
GS_FIELDCAT-FIELDNAME = 'Z_NUMBER'.
GS_FIELDCAT-SELTEXT_M = '주문번호'.
GS_FIELDCAT-KEY = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 3.
GS_FIELDCAT-FIELDNAME = 'ZID'.
GS_FIELDCAT-SELTEXT_M = '회원ID'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 4.
GS_FIELDCAT-FIELDNAME = 'MATNR'.
GS_FIELDCAT-SELTEXT_M = '제품번호'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 5.
GS_FIELDCAT-FIELDNAME = 'ZNAME'.
GS_FIELDCAT-SELTEXT_M = '제품명'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 6.
GS_FIELDCAT-FIELDNAME = 'Z_SUM'.
GS_FIELDCAT-SELTEXT_M = '주문금액'.
GS_FIELDCAT-DO_SUM = 'X'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

CLEAR: GS_FIELDCAT.
GS_FIELDCAT-COL_POS = 7.
GS_FIELDCAT-FIELDNAME = 'ZZ_CODE'.
GS_FIELDCAT-SELTEXT_M = '배송지역'.
APPEND GS_FIELDCAT TO GT_FIELDCAT.

LOOP AT GT_ZEDU1_002 INTO GS_ZEDU1_002.
  IF P_R1 = 'X'.
    IF GS_ZEDU1_002-ZZ_STATUS = '2'.
      GS_ZEDU1_002-COLOR = '@09@'.
    ELSE.
      GS_ZEDU1_002-COLOR = '@52@'.
    ENDIF.
  ELSEIF P_R2 = 'X'.
    IF GS_ZEDU1_002-ZZ_STATUS = '2'.
      GS_ZEDU1_002-COLOR = '@52@'.
    ELSE.
      GS_ZEDU1_002-COLOR = '@09@'.
    ENDIF.
  ELSE.
    IF GS_ZEDU1_002-ZZ_STATUS = '2'.
      GS_ZEDU1_002-COLOR = '@52@'.
    ELSE.
      GS_ZEDU1_002-COLOR = '@09@'.
    ENDIF.
  ENDIF.

  MODIFY GT_ZEDU1_002 FROM GS_ZEDU1_002.
ENDLOOP.

CALL FUNCTION 'REUSE_ALV_GRID_DISPLAY'
EXPORTING
  IT_FIELDCAT = GT_FIELDCAT
  TABLES
    T_OUTTAB = GT_ZEDU1_002.

FORM SET_SCREEN.
  LOOP AT SCREEN.
    IF SCREEN-GROUP1 = 'M1'.
      IF P_R2 = 'X'.
        SCREEN-ACTIVE = '1'.
      ELSE.
        SCREEN-ACTIVE = '0'.
      ENDIF.
    ENDIF.
   MODIFY SCREEN.
  ENDLOOP.
ENDFORM.
```